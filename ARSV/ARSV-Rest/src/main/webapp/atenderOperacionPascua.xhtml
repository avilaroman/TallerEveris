<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"   
	template="/WEB-INF/templates/default.xhtml">


   <f:metadata>
		<f:viewParam name="solicitudId" value="#{operacionPascuaController.idOperacionPascua}" />		
		<f:viewParam name="idTask" value="#{operacionPascuaController.idTask}" />
		<f:viewParam name="token" value="#{operacionPascuaController.token}" />		
		<f:event listener="#{operacionPascuaController.obtenerSolicitud}" type="preRenderView"/>
	</f:metadata>
	
	<ui:define name="content">
		<h:form id="atenderOperacionPascua" acceptcharset="utf-8">
			<p:panel header="ATENDER OPERACION ISLA DE PASCUA" style="width:880px;float: left;">
				<p:messages id="messages" globalOnly="true" showDetail="true" autoUpdate="true" closable="true" />
			  	<p:fieldset legend="Solicitud en Atencion">
					<h:panelGrid columns="4" width="800">
						<h:panelGroup>						
							<p:outputLabel value="Numero Solicitud"/>
						</h:panelGroup>
						<h:panelGroup>							
							<p:inputText id="numeroSolicitud" value="#{operacionPascuaController.operacionPascua.id}" readonly="true"/>
						</h:panelGroup>
						<h:panelGroup>						
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.tipoSolicitud']}"/>
						</h:panelGroup>
						<h:panelGroup>							
							<p:inputText id="tipoSolicitud" value="#{operacionPascuaController.operacionPascua.tipoSolicitud.descripcion}" readonly="true"/>
						</h:panelGroup>
						<h:panelGroup>						
							<p:outputLabel value="Estado Solicitud"/>
						</h:panelGroup>
						<h:panelGroup>							
							<p:inputText id="estadoSolicitud" value="#{operacionPascuaController.operacionPascua.arsvEstadoSolicitud.descripcion}" readonly="true"/>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="Fecha Solicitud"/>
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="FechaSolicitud" value="#{operacionPascuaController.operacionPascua.fechaCreacion}" readonly="true">
								<f:convertDateTime pattern="dd/MM/yyyy"/>
							</p:inputText>
						</h:panelGroup>
					</h:panelGrid>
				</p:fieldset>
				<br/>
				<p:fieldset legend="Datos del Operador / Data Operator">
					<h:panelGrid columns="2" width="800">
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.nombreEmpresa']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.nombreEmpresa']}"	style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="nombreEmpresa"	value="#{operacionPascuaController.operacionPascua.nombreEmpresa}" readonly="true" maxlength="50" size="60" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.direccion']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.direccion']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="direccion"	value="#{operacionPascuaController.operacionPascua.direccion}" readonly="true" maxlength="50" size="60" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.direccionFacturacion']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.direccionFacturacion']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="direccionFacturacion" value="#{operacionPascuaController.operacionPascua.direccionFacturacion}" readonly="true" maxlength="50" size="60" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.razonSocial']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.razonSocial']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="razonSocial" value="#{operacionPascuaController.operacionPascua.razonSocial}"	readonly="true" maxlength="50" size="60" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.correoElectronico']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.correoElectronico']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="correoElectronicoOperadorArsv"	value="#{operacionPascuaController.operacionPascua.correoElectronicoOperador}" maxlength="50" size="25" readonly="true" />
							<p:message for="correoElectronicoOperadorArsv" />
						</h:panelGroup>
					</h:panelGrid>
				</p:fieldset>
				<br/>
				<p:fieldset legend="Datos Aeronaves / Aircraft Data">
					<h:panelGrid columns="4" width="800">
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.matriculaAeronave']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.matriculaAeronave']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="matriculaAeronave"	value="#{operacionPascuaController.operacionPascua.aeronave.matricula}"	readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.nacionalidad']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.nacionalidad']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="arsvPaisOrigen" value="#{operacionPascuaController.operacionPascua.paisAeronave.descripcion}" readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.tipoAeronave']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.tipoAeronave']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="arsvTipoAeronaves" value="#{operacionPascuaController.operacionPascua.aeronave.tipo}"	readonly="true" maxlength="50" size="25"/>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.MTOW']}" />
						</h:panelGroup>
						<h:panelGroup>
							<br/>
							<h:panelGrid columns="2" width="70">
							<p:inputText id="MTOW" value="#{operacionPascuaController.operacionPascua.MTOW}" readonly="true" maxlength="50" size="25" />
							<p:inputText id="UnidadPeso" value="#{operacionPascuaController.operacionPascua.unidadPeso.descripcion}" readonly="true" maxlength="50" size="10" />
							<br />
							</h:panelGrid>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.nombrePiloto']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.nombrePiloto']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="nombrePiloto" value="#{operacionPascuaController.operacionPascua.nombrePiloto}" readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
					</h:panelGrid>
				</p:fieldset>
 				<br/>
				<p:fieldset legend="Datos Vuelo / Flight Data">
					<h:panelGrid columns="4" width="745">
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.objetoVuelo']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.objetoVuelo']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="objetoVuelo" value="#{operacionPascuaController.operacionPascua.objetoVuelo.descripcion}"	readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.clasificacionVuelo']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.clasificacionVuelo']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="arsvClasificacionesPascua" value="#{operacionPascuaController.operacionPascua.clasificacion.descripcion}"	readonly="true" style="width:185px"/>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.paisOrigen']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.paisOrigen']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="arsvPaisOrigenPascua" value="#{operacionPascuaController.operacionPascua.paisOrigen.descripcion}"	readonly="true" style="width:185px"/>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.OACI']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.OACI']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="arsvOACI" value="#{operacionPascuaController.operacionPascua.arsvOACI.codigo}"	readonly="true" style="width:185px"/>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.callSign']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.callSign']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="arsvCallSign" value="#{operacionPascuaController.operacionPascua.callSign}" readonly="true" style="width:185px"/>
						</h:panelGroup>
					</h:panelGrid>
					<br/>
					<h:panelGrid columns="2" width="800">
					<h:panelGroup>
						<p:fieldset id="detalleRutaArsv1"  legend="#{bundles.operacionPascua['fieldset.esp.solicitud.operacionPascua.detalleRIngresar']}">
							<p:dataTable id="detalleNArsv1" var="det"
								value="#{operacionPascuaController.rutaPrincipal}">
								<p:column headerText=" " style="width:25%">
									<h:outputText value="#{det.tipoRuta}" />
								</p:column>
								<p:column headerText="#{bundles.operacionPascua['columna.esp.solicitud.operacionPascua.posta']}" style="width:75%">
									<h:outputText value="#{det.posta}" />
								</p:column>
							</p:dataTable>
							<br />
							<br/>
						</p:fieldset>
					</h:panelGroup>
					<h:panelGroup>
						<p:fieldset id="detalleRutaArsvAlternativa" legend="#{bundles.operacionPascua['fieldset.esp.solicitud.operacionPascua.detalleRalternativa']}">
							<p:dataTable id="detalleNArsvAlternativa" var="det"
								value="#{operacionPascuaController.rutaAlternativa}">
								<p:column headerText=" " style="width:25%">
									<h:outputText value="#{det.tipoRuta}" />
								</p:column>
								<p:column headerText="#{bundles.operacionPascua['columna.esp.solicitud.operacionPascua.posta']}" style="width:75%">
									<h:outputText value="#{det.posta}" />
								</p:column>
							</p:dataTable>
							<br />
							<br/>
						</p:fieldset>
					</h:panelGroup>
				</h:panelGrid>
					 <br/>
					<p:fieldset legend="Fecha / Date">
						<h:panelGrid columns="2">
							<h:panelGroup>
								<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.arriboIsla']}" />
								<br />
								<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.arriboIsla']}" style="color:grey" />
							</h:panelGroup>							
							<h:panelGroup>
								<p:inputText id="arriboTerritorioNacional" value="#{operacionPascuaController.operacionPascua.fechaArribo}" readonly="true" >
									<f:convertDateTime pattern="dd/MM/yyyy hh:mm" />
								</p:inputText>	
							</h:panelGroup>
							<h:panelGroup>
								<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.salidaIsla']}" />
								<br />
								<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.salidaIsla']}"
									style="color:grey" />
							</h:panelGroup>							
							<h:panelGroup>
								<p:inputText id="salidaTerritorioNacional"	value="#{operacionPascuaController.operacionPascua.fechaSalida}" readonly="true" >
									<f:convertDateTime pattern="dd/MM/yyyy hh:mm" />
								</p:inputText>
							</h:panelGroup>
						</h:panelGrid>
					</p:fieldset>
					<br/>
					<h:panelGrid columns="2">
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.observacion']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.observacion']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>						
							<p:inputTextarea id="observacion" value="#{operacionPascuaController.operacionPascua.observaciones}" readonly="true" maxlength="2000" size="2000" style="height : 150px; width : 600px;" />
						</h:panelGroup>
					</h:panelGrid>
				</p:fieldset>
				<br/>
				<p:fieldset legend="Vuelo Comercial / If Comercial Flight">
					<h:panelGrid columns="2">
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.validezSeguro']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.validezSeguro']}"
								style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="validezSeguro"	value="#{operacionPascuaController.operacionPascua.vigenciaSeguro}"	readonly="true" >
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</p:inputText>
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.cantidadVuelos']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.cantidadVuelos']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="cantidadVuelos" value="#{operacionPascuaController.operacionPascua.cantidadVuelos}" readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
					</h:panelGrid>
				</p:fieldset>
				<br/>
				<p:fieldset legend="Transporte de Carga / If Cargo flight" >
					<h:panelGrid columns="2">
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.embarcador']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.embarcador']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="embarcador" value="#{operacionPascuaController.operacionPascua.embarcador}"	readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.consignator']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.consignator']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="consignatario" value="#{operacionPascuaController.operacionPascua.consignatario}" readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
						<h:panelGroup>
							<p:outputLabel value="#{bundles.operacionPascua['label.esp.solicitud.operacionPascua.correoElectronico']}" />
							<br />
							<p:outputLabel value="#{bundles.operacionPascua['label.eng.solicitud.operacionPascua.correoElectronico']}" style="color:grey" />
						</h:panelGroup>
						<h:panelGroup>
							<p:inputText id="correoElectronico"	value="#{operacionPascuaController.operacionPascua.correoElectronico}" readonly="true" maxlength="50" size="25" />
						</h:panelGroup>
					</h:panelGrid>
				</p:fieldset>	
				<br/>
					<ui:include src="/adjuntos/archivosPascuaAtender.xhtml"/>
				<br/>
				<p:fieldset legend="Datos Solicitados a Operador" rendered="#{operacionPascuaController.verificarAntecedentesSolicitados}">
					<p:panel header="Antecedente Solicitados" style="width:800px;float: left;">
						<h:form id="responderOperador" enctype="multipart/form-data">					
							<h3>Mensaje de lo Solicitado</h3>	
							<p:inputTextarea value="#{operacionPascuaController.operacionPascua.antecedentesSolicitados}" cols="100" rows="5" id="solicitado" 
								autoResize="false" maxlength="1000" readonly="true"/>
							<br/>
							<br/>
							<h3>Antecedentes</h3>		
							<p:inputTextarea value="#{operacionPascuaController.operacionPascua.detalleSolicitud}" cols="100" rows="5" id="respuesta" 
								autoResize="false" maxlength="1000" readonly="true" />				
							</h:form>		
					</p:panel>
				</p:fieldset>
			
				
				<center>		
				<h:panelGrid columns="4" width="800">
					<p:commandButton id="solicitarCorrecion" value="Corregir" action="#{operacionPascuaController.irSolicitudMasAntecedente}" style="width:180px;">
						<f:param name="idSolicitudArsv" value="#{operacionPascuaController.idOperacionPascua}"/>
						<f:viewParam name="idTask" value="#{operacionPascuaController.idTask}" />
						<f:viewParam name="token" value="#{solicitudController.token}" />				
					</p:commandButton>					
					<p:commandButton id="aprobar" value="Aprobar" onclick="confirmation.show()" ajax="true" style="width:180px;" />
					<p:commandButton id="respuestaJAC" value="Solicitar JAC" onclick="confirmation2.show()" ajax="true" style="width:180px;" />
					<p:commandButton id="salir" value="Salir" onclick="window.close();" style="width:180px;"/>
				</h:panelGrid>		
				</center>		
				<p:confirmDialog id="confirmDialog" header="Aprobar" widgetVar="confirmation" message="Sr. Usuario: Desea Informar la solicitud?" > 
	               	<p:outputPanel id="display"> 
	               		<h:panelGroup> 
			        		<p:commandButton id="confirma" value="Confirmar" oncomplete="confirmation.hide(); window.close()" action="#{operacionPascuaController.asignarArsvAroAmb}"/>  
			        		<p:commandButton id="cancela" value="Cancelar" onclick="confirmation.hide()" type="button" />
	               		</h:panelGroup> 
	                </p:outputPanel>  
	    		</p:confirmDialog> 	
	    		<p:confirmDialog id="confirmDialog2" header="Solicitar JAC" widgetVar="confirmation2" message="Sr. Usuario: Desea Informacion de la JAC?" > 
	               	<p:outputPanel id="display2"> 
	               		<h:panelGroup> 
			        		<p:commandButton id="confirma2" value="Confirmar" oncomplete="confirmation2.hide(); window.close()" action="#{operacionPascuaController.asignarJAC}"/>  
			        		<p:commandButton id="cancela2" value="Cancelar" onclick="confirmation2.hide()" type="button" />
	               		</h:panelGroup> 
	                </p:outputPanel>  
	    		</p:confirmDialog> 	
	    		</p:panel> 				
			</h:form>
	</ui:define>
</ui:composition>